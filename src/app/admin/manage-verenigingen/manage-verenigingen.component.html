<div class="container" *ngIf="pageLoaded">
  <div class="card table-wrapper shadow-lg">
    <div class="card-header table-title">
      <div class="row">
        <div class="col-sm-6">
          <h2><b>Verenigingen beheren</b></h2>
        </div>
        <div class="col-sm-6">
          <a class="btn btn-success" (click)="changeExcel()" *ngIf="!excelModus"><i class="far fa-file-excel"></i>
            <span>Excel modus</span></a>
          <a class="btn btn-success" *ngIf="!excelModus" [routerLink]="['/createVerenigingAdmin']"
            routerLinkActive="router-link-active"><i class="material-icons">&#xE147;</i> <span>Voeg vereniging
              toe</span></a>
          <a class="btn btn-success" (click)="changeExcel()" *ngIf="excelModus"><i class="fas fa-edit"></i>
            <span>Edit modus</span></a>
          <a class="btn btn-success" (click)="export()" *ngIf="excelModus"><i class="fas fa-file-export"></i>
            <span>Export data</span></a>
        </div>
      </div>
    </div>

    <div class="card-body">
      <div class="row" *ngIf="!excelModus">
        <div class="col-12 table-responsive">
          <table class="table table-striped table-hover">
            <thead>
              <tr>
                <th scope="col">Naam</th>
                <th scope="col">Hoofdverantwoordelijke</th>
                <th scope="col">Contactpersoon</th>
                <th scope="col">Actief</th>
                <th scope="col">Acties</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let vereniging of verenigingen | paginate: { itemsPerPage: 10, currentPage: p }" (click)="onClickDetailVereniging(vereniging)"
                data-toggle="modal" data-target="#verenigingModal">
                <td>{{vereniging.naam}}</td>
                <td>{{vereniging.hoofd.name}} {{vereniging.hoofd.voornaam}}</td>
                <td *ngIf="vereniging.contact != null">{{vereniging.contact.name}} {{vereniging.contact.voornaam}}</td>
                <td *ngIf="vereniging.contact == null">Geen contactpersoon</td>
                <td>
                  <div *ngIf="vereniging.actief == 0">Niet Actief</div>
                  <div *ngIf="vereniging.actief == 1">Actief</div>
                </td>
                <td>
                  <a [routerLink]="['/editVerenigingAdmin', vereniging.id]" routerLinkActive="router-link-active"
                    class="edit"><i class="material-icons" data-toggle="tooltip" title="Bewerken">&#xE254;</i></a>
                </td>
              </tr>
            </tbody>
          </table>
          <pagination-controls (pageChange)="p = $event" directionLinks="true" responsive="true" previousLabel="Vorige"
                               nextLabel="Volgende"></pagination-controls>
        </div>
      </div>
      <div class="row handtable" *ngIf="excelModus">
        <div class="col-12">
          <hot-table [data]="data" [colHeaders]="colHeaders" [rowHeaders]="false" [hotId]="id"
            licenseKey="non-commercial-and-evaluation" [columns]="columns" dropdownMenu="true" filters="true"
            language="nl-NL" columnSorting="true" height="400"></hot-table>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="verenigingModal" tabindex="-1" role="dialog" aria-labelledby="verenigingModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="verenigingModalLabel">Vereniging detail</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form [formGroup]="verenigingForm">
          <div class="row">
            <div class="col-lg-6">
              <div class="form-group">
                <label for="naam">Naam</label>
                <input class="form-control" type="text" id="naam" name="naam" formControlName="naam" readonly>
              </div>
            </div>
            <div class="col-lg-3">
              <div class="form-group">
                <label for="rekeningnr">Rekeningnummer</label>
                <input class="form-control" type="text" id="rekeningnr" name="rekeningnr" formControlName="rekeningnr"
                  readonly>
              </div>
            </div>
            <div class="col-lg-3">
              <div class="form-group">
                <label for="btwnr">BTW nummer</label>
                <input class="form-control" type="text" id="btwnr" name="btwnr" formControlName="btwnr" readonly>
              </div>
            </div>
            <div class="col-lg-3">
              <div class="form-group">
                <label for="straat">Straat</label>
                <input class="form-control" type="text" id="straat" name="straat" formControlName="btwnr" readonly>
              </div>
            </div>
            <div class="col-lg-3">
              <div class="form-group">
                <label for="huisnummer">Huisnummer</label>
                <input class="form-control" type="number" id="huisnummer" name="huisnummer" formControlName="huisnummer"
                  readonly>
              </div>
            </div>
            <div class="col-lg-3">
              <div class="form-group">
                <label for="gemeente">Gemeente</label>
                <input class="form-control" type="text" id="gemeente" name="gemeente" formControlName="gemeente"
                  readonly>
              </div>
            </div>
            <div class="col-lg-3">
              <div class="form-group">
                <label for="postcode">Postcode</label>
                <input class="form-control" type="text" id="postcode" name="postcode" formControlName="postcode"
                  readonly>
              </div>
            </div>
            <div class="col-lg-4">
              <div class="form-group">
                <label for="contact">Contactpersoon</label>
                <input class="form-control" type="text" id="contact" name="contact" formControlName="contact" readonly>
              </div>
            </div>
            <div class="col-lg-4">
              <div class="form-group">
                <label for="hoofdverantwoordelijke">Hoofdverantwoordelijke</label>
                <input class="form-control" type="text" id="hoofdverantwoordelijke" name="hoofdverantwoordelijke"
                  formControlName="hoofdverantwoordelijke" readonly>
              </div>
            </div>
            <div class="col-lg-4">
              <div class="form-group">
                <label for="tweedeverantwoordelijke">Tweede verantwoordelijke</label>
                <input class="form-control" type="text" id="tweedeverantwoordelijke" name="tweedeverantwoordelijke"
                  formControlName="tweedeverantwoordelijke" readonly>
              </div>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Sluiten</button>
      </div>
    </div>
  </div>
</div>
